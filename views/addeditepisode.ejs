<%- include("shared/header") %>
<%- include("shared/logo", { src: locals.episode ? "/editepisode.png" : "/addepisode.png" }) %>
<%- include("shared/floatingbutton", { href: locals.episode ? `/show/${show._id}/episode/${episode._id}` : `/show/${show._id}`,  icon: "fas fa-arrow-left", top: "40px", left: "20px" }) %>
<%- locals.episode && include("shared/floatingbutton", { href: `/show/${show._id}/episode/${episode._id}/delete`, icon: "fas fa-trash-alt", top: "40px", right: "20px" }) %>

<form method="POST">
  <div class="form-outline mb-4">
    <input name="title" id="title" type="text" class="form-control form-control-lg" value="<%= locals.episode?.title %>"
      required />
    <label for="title" class="form-label">Episode title</label>
  </div>

  <div class="form-outline mb-4">
    <input name="season" id="season" type="number" class="form-control form-control-lg"
      value="<%= locals.episode?.season %>" required />
    <label for="season" class="form-label">Season number</label>
  </div>

  <div class="form-outline mb-4">
    <input name="number" id="number" type="number" class="form-control form-control-lg"
      value="<%= locals.episode?.number %>" required />
    <label for="number" class="form-label">Episode number</label>
  </div>

  <div class="form-outline mb-4">
    <input name="airdate" id="airdate" type="<%= locals.episode?.airdate ? "date" : "text" %>"
      class="form-control form-control-lg" onfocus="(this.type='date')" onblur="if(!this.value)this.type='text'"
      value="<%= locals.episode?.airdate ? `${episode.airdate.getFullYear()}-${('0' + (episode.airdate.getMonth() + 1)).slice(-2)}-${('0' + episode.airdate.getDate()).slice(-2)}` : "" %>" />
    <label for="airdate" class="form-label">Air date</label>
  </div>

  <div class="form-outline mb-4">
    <input name="thumbnail" id="thumbnail" type="url" class="form-control form-control-lg"
      value="<%= locals.episode?.thumbnail %>" />
    <label for="thumbnail" class="form-label">Thumbnail link</label>
  </div>

  <div class="form-outline mb-4">
    <textarea name="synopsis" id="synopsis" class="form-control form-control-lg"
      rows="6"><%= locals.episode?.synopsis %></textarea>
    <label for="synopsis" class="form-label">Synopsis</label>
  </div>

  <div class="form-check d-flex justify-content-center">
    <input name="favorite" id="favorite" class="form-check-input me-2" type="checkbox"
      <%= locals.episode?.favorite ? "checked" : "" %> />
    <label for="favorite" class="form-check-label">
      Add to favorites
    </label>
  </div>

  <div class="d-flex justify-content-center">
    <button type="submit" class="btn btn-lg btn-success rounded-pill mt-5"><i class="fas fa-save me-2"></i>Save
      changes</button>
  </div>
</form>

<%- include("shared/footer") %>