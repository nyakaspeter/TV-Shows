<%- include("shared/header") %>
<%- include("shared/logo", { src: "/episodeinfo.png" }) %>
<%- include("shared/floatingbutton", { href: `/show/${show._id}`,  icon: "fas fa-arrow-left", top: "40px", left: "20px" }) %>
<%- include("shared/floatingbutton", { href: `/show/${show._id}/episode/${episode._id}/edit`,  icon: "fas fa-pencil-alt", top: "40px", right: "20px" }) %>

<div class="row">
  <div class="col-12">
    <div class="card d-flex flex-column">
      <img src="<%= episode.thumbnail %>"
        onerror="this.src = `https://via.placeholder.com/800x480?text=<%= episode.title %>`;" class="bg-image"
        style="object-fit: cover" />

      <div class="card-body d-flex flex-column gap-3 align-items-center justify-content-around">
        <div class="d-flex flex-column gap-2 align-items-center mt-2">
          <h6 class="card-text display-6" style="font-size: 1.5rem; word-wrap: break-word">
            <%= show.title %>
            |
            S<%= episode.season.toString().length > 1 ? episode.season : `0${episode.season}` %>E<%= episode.number.toString().length > 1 ? episode.number : `0${episode.number}` %>
            <%= episode.airdate ? "| " + episode.airdate.toLocaleDateString() : "" %>
          </h6>
          <div class="d-flex flex-row gap-2 align-items-center">
            <div>
              <h5 class="card-text display-5 text-center"><%= episode.title %></h5>
            </div>

            <a href="/show/<%= show._id %>/episode/<%= episode._id %>/star" class="ripple">
              <i style="color: #db202c" class="<%= episode.favorite ? "fas" : "far" %> fa-star"></i>
            </a>
          </div>
        </div>

        <div class="d-flex flex-column justify-content-center mx-4">
          <p>
            <%= episode.synopsis %>
          </p>
        </div>
      </div>
    </div>
  </div>
</div>

<%- include("shared/footer") %>